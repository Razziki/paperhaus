<div class="cart-page">
  <h1>Your Cart</h1>

  <% if @cart.any? %>
    <table class="table cart-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Line Total</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @cart.each do |product, qty| %>
          <tr>
            <td><%= product.name %></td>

            <td>
              <%= form_with url: update_cart_item_path(product), method: :patch, local: true do |f| %>
                <%= f.number_field :quantity, value: qty, min: 0 %>
                <%= f.submit "Update" %>
              <% end %>
            </td>

            <td><%= number_to_currency(product.price_cents / 100.0) %></td>
            <td><%= number_to_currency((product.price_cents * qty) / 100.0) %></td>

            <td>
              <%= button_to "Remove", remove_from_cart_path(product), method: :delete %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

 <p class="mt-3">
  <%= button_to "Proceed to Checkout", new_order_path, method: :get %>
</p>

  <% else %>
    <p>Your cart is empty.</p>
  <% end %>
</div>
