<h1 class="mb-4">Books</h1>

<%= form_with url: products_path, method: :get, local: true, class: "row g-2 mb-4" do %>
  <!-- Search: full width on its own row since bootstrap would have moved ever single row without this-->
  <div class="col-12">
    <label class="form-label">Search:</label>
    <input type="text" name="search" value="<%= @search %>" placeholder="Title or description" class="form-control">
  </div>

  <!-- Category -->
  <div class="col-12 col-md-4">
    <label class="form-label">Category:</label>
    <select name="category_id" class="form-select">
      <option value="">All</option>
      <% @categories.each do |c| %>
        <option value="<%= c.id %>" <%= "selected" if c.id.to_s == @category_id.to_s %>>
          <%= c.name %>
        </option>
      <% end %>
    </select>
  </div>

  <!-- Search button: next to Category on desktop, under it on mobile -->
  <div class="col-12 col-md-2 d-flex align-items-end">
    <button type="submit" class="btn btn-primary w-100">Search</button>
  </div>
<% end %>

<% @products.each do |product| %>
  <%= render "product", product: product %>
<% end %>

<div class="mt-3 pagination-container">
  <%= paginate @products %>
</div>
